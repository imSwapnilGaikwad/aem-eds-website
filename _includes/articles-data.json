
{
  "articles": [
    {%- for post in site.posts -%}
    {
      "title": {{ post.title | jsonify }},
      "link": "{{ post.url | relative_url }}",
      "excerpt": {{ post.excerpt | strip_html | truncate: 150 | jsonify }},
      "date": "{{ post.date | date: '%Y-%m-%d' }}",
      "category": {{ post.category | downcase | default: "" | jsonify }},
      "tags": [
        {%- for tag in post.tags -%}
        {{ tag | downcase | jsonify }}{%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
      ],
      "reading_time": {{ post.reading_time | default: 5 }},
      "featured": {{ post.featured | default: false }}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ],
  "categories": [
    {%- assign categories = site.posts | map: 'category' | uniq | compact -%}
    {%- for category in categories -%}
    {
      "name": {{ category | jsonify }},
      "slug": {{ category | downcase | jsonify }},
      "count": {{ site.posts | where: 'category', category | size }}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ],
  "tags": [
    {%- assign all_tags = site.posts | map: 'tags' | join: ',' | split: ',' | uniq | compact -%}
    {%- for tag in all_tags -%}
    {%- if tag != "" -%}
    {
      "name": {{ tag | jsonify }},
      "slug": {{ tag | downcase | jsonify }},
      "count": {{ site.tags[tag] | size | default: 0 }}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- endif -%}
    {%- endfor -%}
  ]
}